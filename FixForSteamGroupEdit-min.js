// ==UserScript==
// @name         Fix Steam Group Edit
// @namespace    FixSteamGroupEdit
// @version      1.2
// @description  Fixes the bugged edit website of steam groups.
// @author       TrolluXe
// @match        https://steamcommunity.com/groups/*/edit
// @match        https://steamcommunity.com/groups/*/edit/profile
// @icon         https://www.google.com/s2/favicons?sz=64&domain=steamcommunity.com
// @grant        none
// ==/UserScript==

function putButtonStyle(){var b,a;(b=document.getElementsByTagName("head")[0])&&((a=document.createElement("style")).type="text/css",a.innerHTML=`:root {--FSGE_aquamarine: #059984; --FSGE_green: #06a06d; --FSGE_lightgreen: #07BFAE; --FSGE_darkgreen: #04693A; --FSGE_lightred: #BF0707; --FSGE_darkred: #990505; --FSGE_darkerred: #690404; } .btn_default_style > span { border-radius: 2px; display: block; } .btn_approvalgreen_white_innerfade > span { background:var(--FSGE_aquamarine); background: -webkit-linear-gradient( top,var(--FSGE_aquamarine) 5%,var(--FSGE_darkgreen) 95%); background: linear-gradient( to bottom,var(--FSGE_aquamarine) 5%,var(--FSGE_darkgreen) 95%); } .btn_approvalgreen_white_innerfade:not(.btn_disabled):not(:disabled):not(.btn_active):not(.active):hover > span { background:var(--FSGE_lightgreen); background: -webkit-linear-gradient( top,var(--FSGE_lightgreen) 5%, var(--FSGE_green) 95%); background: linear-gradient( to bottom,var(--FSGE_lightgreen) 5%, var(--FSGE_green) 95%); } .btn_red_white_innerfade > span { background:var(--FSGE_darkred); background: -webkit-linear-gradient( top,var(--FSGE_darkred) 5%,var(--FSGE_darkerred) 95%); background: linear-gradient( to bottom,var(--FSGE_darkred) 5%,var(--FSGE_darkerred) 95%); } .btn_red_white_innerfade:not(.btn_disabled):not(:disabled):not(.btn_active):not(.active):hover > span { background:var(--FSGE_lightred); background: -webkit-linear-gradient( top,var(--FSGE_lightred) 5%, #a00606  95%); background: linear-gradient( to bottom,var(--FSGE_lightred) 5%, #a00606 95%); } .forum_manage_actions .btn_medium { margin-left: 0; }`,b.appendChild(a))}function addUrlFields(){let f=document.getElementsByClassName("group_content group_summary")[0];for(var a=1;a<=3;a++){let m="weblink_"+a+"_title",n="weblink_"+a+"_url";if(a>1){let o=document.createElement("br");f.appendChild(o)}let b=document.createElement("div");b.className="formRow",b.margin="0 0 20px 0 !important";let g=document.createElement("div");g.className="formRowFields";let h=document.createElement("div");h.className="formRowTitle",h.textContent="Website Title";let i=document.createElement("div");i.className="gray_bevel for_text_input fullwidth";let c=document.createElement("input");c.className="dynInput",c.type="text",c.name="["+a+"] Title",c.id=m,i.appendChild(c),g.appendChild(i),b.appendChild(g),b.appendChild(h),f.appendChild(b);let d=document.createElement("div");d.className="formRow",d.margin="0 0 20px 0 !important";let j=document.createElement("div");j.className="formRowFields";let k=document.createElement("div");k.className="formRowTitle",k.textContent="Website Link";let l=document.createElement("div");l.className="gray_bevel for_text_input fullwidth";let e=document.createElement("input");e.className="dynInput",e.type="text",e.name="["+a+"] Url",e.id=n,l.appendChild(e),j.appendChild(l),d.appendChild(j),d.appendChild(k),f.appendChild(d)}}function addSaveButton(){document.getElementsByClassName("btn_green_white_innerfade btn_medium")[0].className="btn_default_style btn_approvalgreen_white_innerfade btn_medium";let d=document.getElementsByClassName("group_admin_header")[0],e=document.getElementsByClassName("admin_avatar_dropshadow")[0],a=document.createElement("div");a.className="forum_manage_actions",a.style.top="2.3em",a.style.position="relative";let b=document.createElement("a");b.className="btn_default_style btn_approvalgreen_white_innerfade btn_medium",b.href="javascript:validateFields();";let c=document.createElement("span");c.innerHTML="Save Changes",b.appendChild(c),a.appendChild(b),d.insertBefore(a,e)}function addGroupID64(b){let a=document.getElementsByClassName("formRowFields")[0],c=a.textContent+" | ID64: "+b;a.textContent=c}!function(){"use strict";let b=document.getElementsByClassName("groupadmin_header_name")[0].textContent,a=g_strBaseEditURL.replace("https://steamcommunity.com/actions/EditProcess?gId=",""),c=("Editing "+b+" ("+a+")").replace("  "," ").replace("( ","(").replace(") ",")");console.log(c),putButtonStyle(),addUrlFields(),addSaveButton(),addGroupID64(a)}()